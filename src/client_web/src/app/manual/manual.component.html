<p-progressSpinner *ngIf="!manual$"></p-progressSpinner>

<div *ngIf="manual$ | async as manual">
  <ng-container *ngIf="!documentName; then noDocument; else withDocument"></ng-container>
  <ng-template #noDocument>
    <div fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutAlign="left">
      <mat-card class="manual-card" [routerLink]="[document.name]" *ngFor="let document of manual.documents">
        <mat-card-header>
          <mat-card-title>{{document.title}}</mat-card-title>
          <mat-card-subtitle>{{document.subtitle}}</mat-card-subtitle>
        </mat-card-header>
        <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
        <mat-card-content>
          <p>
            {{document.summary}}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" fxFlex="20%">Imprimer</button>
          <button mat-button color="primary" fxFlex="20%">Partager</button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!--<p-card *ngFor="let document of manual.documents" [routerLink]="[document.name]" [header]="document.title" [subheader]="document.name" [style]="{width: '360px'}" styleClass="ui-card-shadow">-->
    <!--&lt;!&ndash;<p-header>&ndash;&gt;-->
    <!--&lt;!&ndash;Picture!&ndash;&gt;-->
    <!--&lt;!&ndash;</p-header>&ndash;&gt;-->
    <!--{{document.summary}}-->
    <!--&lt;!&ndash;<p-footer>&ndash;&gt;-->
    <!--&lt;!&ndash;<button mat-button color="primary">Imprimer</button>&ndash;&gt;-->
    <!--&lt;!&ndash;&lt;!&ndash;<button pButton type="button" label="Imprimer" icon="pi pi-print" style="margin-right: .25em"></button>&ndash;&gt;&ndash;&gt;-->
    <!--&lt;!&ndash;</p-footer>&ndash;&gt;-->
    <!--</p-card>-->

    <!--<ul>-->
    <!--<li *ngFor="let document of manual.documents" [routerLink]="[document.name]">{{document.title}}</li>-->
    <!--</ul>-->
  </ng-template>

  <ng-template #withDocument>
    <h1>{{currentDocument.title}}</h1>
    <dynamic-section *ngFor="let element of currentDocument.sections" [section]="element" [depth]="0"></dynamic-section>
  </ng-template>
</div>
