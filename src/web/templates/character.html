{% extends "_base.html" %}

{% block content %}

<div ng-controller="character_ctrl">
  <div class="sidebar-left">
    <br/>
    <div class="bs-sidebar hidden-print affix" role="complementary">
      Joueur
      <div ng-show="!new_player">
        <button class="btn btn-success" ng-click="newPlayer()"><span class="glyphicon glyphicon-plus"></span> <span class="glyphicon glyphicon-user"></span> Nouveau joueur</button>
      </div>
      <div ng-show="new_player">
        <button class="btn btn-success"><span class="glyphicon glyphicon-floppy-save"></span> <span class="glyphicon glyphicon-user"></span> Enregistrer nouveau joueur</button>
      </div>
      <div ng-show="new_player">
        <button class="btn btn-danger" ng-click="discardPlayer()"><span class="glyphicon glyphicon-floppy-remove"></span> <span class="glyphicon glyphicon-user"></span> Annuler nouveau joueur</button>
      </div>
      <div class="list-group" ng-show="!new_player">
        <select class="form-control" ng-model="player" ng-options="user.name for user in ddb_user" ng-change="setCharacterData(null)">
          <option value="">--Sélectionner un joueur--</option>
        </select>
      </div>

      <div class="list-group" ng-show="player && !new_player">
        Fiche personnage<br/>
        <div ng-show="!new_character">
          <button class="btn btn-success" ng-click="newCharacter()"><span class="glyphicon glyphicon-plus"></span> <span class="glyphicon glyphicon-file"></span> Nouveau personnage</button>
        </div>
        <ul class="nav">
          <li ng-repeat="value in player.character">
            <button ng-style="character.name == value.name && {color:'#FF4E00'}" ng-if="character.name" type="button" class="btn btn-info nav-button" ng-click="setCharacterData(value)">
              {{! value.name }}
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>


  <div ng-show="player" role="main" id="playerSheet">
    <form class="col-sm-offset-4" name="characterForm" novalidate>
      <h2>Joueur</h2>

      <div class="form-group row">
        <label for="playerName" class="col-sm-2 form-control-label">Nom joueur</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="playerName" ng-model="player.name" placeholder="Prénom et nom du joueur"/>
        </div>
      </div>

      <div class="form-group row">
        <label for="playerEmail" class="col-sm-2 form-control-label">Émail</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="playerEmail" ng-model="player.email" placeholder="Courriel"/>
        </div>
      </div>

      <div class="print-hide form-group row">
        <div class="col-sm-offset-2 col-sm-8">
          <button type="submit" ng-click="submitCharacterData()" class="btn btn-success"><span class="glyphicon glyphicon-floppy-save"></span> Enregistrer</button>
          <input type="button" value="Imprimer" class="btn btn-primary" ng-click="printCharacterSheet()"/>
          <button type="submit" ng-click="discardPlayer()" class="btn btn-danger"><span class="glyphicon glyphicon-floppy-remove"></span> Annuler</button>
        </div>
      </div>

      <div ng-show="character">
        <hr/>
        <h2>Personnage</h2>

        <div class="form-group row">
          <label for="characterName" class="col-sm-2 form-control-label">Nom Personnage</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="characterName" ng-model="character.name" placeholder="Nom du personnage"/>
          </div>
        </div>

        <div class="print-hide form-group row">
          <div class="col-sm-offset-2 col-sm-8">
            <button type="submit" ng-click="submitCharacterData()" class="btn btn-success"><span class="glyphicon glyphicon-floppy-save"></span> Enregistrer</button>
            <input type="button" value="Imprimer" class="btn btn-primary" ng-click="printCharacterSheet()"/>
            <button type="submit" ng-click="discardPlayer()" class="btn btn-danger"><span class="glyphicon glyphicon-floppy-remove"></span> Annuler</button>
          </div>
        </div>

      </div>
    </form>
  </div>

</div> <!-- end of caracter_ctrl -->

{% end %}
